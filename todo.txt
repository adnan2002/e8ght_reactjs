I want you to create an page just for the address itself. you have the address list and the users can click on one of them, of course in the params it will include the id of the address.

you need to check if the address belongs to the user, if he is not send him to dashboard page.

anyway, in the page, if the address belongs to the user, he can edit some fields (update), or delete the address. 

if the user decides to delete the address send him back to the address list page.


here are the apis you will need.


1-
route: "/users/me/addresses/:id"
request type: GET
method:
type getAddressByIDRequest struct {
	ID int64 `uri:"id" binding:"required,min=1"`
}

func (s *Server) getAddressByIDHandler(c *gin.Context) {
	payloadVal, ok := c.Get(authenticatedPayload)
	if !ok {
		c.JSON(http.StatusUnauthorized, gin.H{"error": "unauthorized"})
		return
	}
	payload := payloadVal.(token.Payload)
	userID := payload.UserID

	var req getAddressByIDRequest
	if err := c.ShouldBindUri(&req); err != nil {
		c.JSON(http.StatusBadRequest, gin.H{"error": err.Error()})
		return
	}

	address, err := s.Store.GetAddressByIDAndUserID(c, db.GetAddressByIDAndUserIDParams{
		ID:     req.ID,
		UserID: userID,
	})
	if err != nil {
		c.JSON(http.StatusInternalServerError, gin.H{"error": "failed to get address"})
		return
	}
	if address.UserID != userID {
		c.JSON(http.StatusForbidden, gin.H{"error": "unauthorized"})
		return
	}
	c.JSON(http.StatusOK, gin.H{"address": address})
}

response:
"address": {
	
}

